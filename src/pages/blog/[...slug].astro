---

import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const { slug } = Astro.params;
if (!slug) {
	return Astro.redirect('/404');
}

const posts = await getCollection('blog');
const post = posts.find((p) => p.slug === slug);

if (!post) {
	return Astro.redirect('/404');
}

const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description} image={post.data.heroImage}>
	<article class="prose prose-invert lg:prose-xl mx-auto px-4 py-8">
		{post.data.heroImage && <img width={1020} height={510} src={post.data.heroImage} alt="" class="rounded-lg shadow-lg mb-8" />}
		<h1 class="text-4xl font-bold text-white mb-4">{post.data.title}</h1>
        <div class="flex gap-4 text-sm text-gray-400 mb-8">
            <time datetime={post.data.pubDate.toISOString()}>
                {post.data.pubDate.toLocaleDateString('nl-NL', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                })}
            </time>
        </div>
		<Content />
	</article>
</Layout>
