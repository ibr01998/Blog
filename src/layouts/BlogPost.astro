---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import CtaButton from '../components/CtaButton.astro';

// This layout will be used by the markdown/MDX files directly or wrapped
interface Props {
	title: string;
	description: string;
  pubDate?: Date;
  updatedDate?: Date;
  heroImage?: string;
  affiliateLink?: string;
  affiliateText?: string;
}

const { title, description, pubDate, updatedDate, heroImage, affiliateLink, affiliateText } = Astro.props;
---

<!doctype html>
<html lang="nl" class="h-full antialiased">
	<head>
		<BaseHead title={title} description={description} image={heroImage} />
    <style>
      /* BlogPost prose â€” uses CSS variables for theme support */
      .prose {
        max-width: 65ch;
      }
      .prose h2 {
        color: var(--text-main);
        margin-top: 2em;
        margin-bottom: 1em;
        font-size: 1.5rem;
        font-weight: 700;
      }
      .prose h3 {
        color: var(--text-main);
        margin-top: 1.5em;
        margin-bottom: 0.75em;
        font-size: 1.25rem;
        font-weight: 600;
      }
      .prose p {
        margin-bottom: 1.25em;
        line-height: 1.8;
        color: var(--text-muted);
      }
      .prose ul, .prose ol {
        margin-bottom: 1.25em;
        padding-left: 1.5em;
        color: var(--text-muted);
      }
      .prose ul {
        list-style-type: disc;
      }
      .prose li {
        margin-bottom: 0.5em;
      }
      .prose li::marker {
        color: var(--text-main);
      }
      .prose strong {
        color: var(--text-main);
        font-weight: 700;
      }
      .prose a {
        color: var(--text-main);
        text-decoration: underline;
        text-underline-offset: 3px;
        text-decoration-color: var(--border-color);
        font-weight: 600;
      }
      .prose a:hover {
        text-decoration-color: var(--text-main);
      }
      .prose blockquote {
        border-left: 3px solid var(--text-main);
        padding-left: 1em;
        font-style: italic;
        color: var(--text-muted);
      }
    </style>
	</head>
	<body class="flex flex-col min-h-screen bg-[var(--bg-main)] text-[var(--text-main)] font-outfit">
		<Header />
		<main class="flex-grow container mx-auto px-4 py-12 md:py-16 max-w-4xl">
			<article class="mx-auto">
        <!-- Article Header -->
        <div class="mb-10 text-center border-b border-theme pb-10">
           <div class="inline-flex items-center gap-2 text-sm font-medium text-muted uppercase tracking-wider mb-4">
              {pubDate && <time datetime={pubDate.toISOString()}>{pubDate.toLocaleDateString('nl-NL')}</time>}
              <span class="w-1 h-1 bg-current rounded-full"></span>
              <span>Article</span>
           </div>
          <h1 class="text-4xl md:text-6xl font-extrabold text-main mb-6 leading-tight tracking-tight">{title}</h1>
          <p class="text-xl md:text-2xl text-muted leading-relaxed max-w-2xl mx-auto">{description}</p>
          
          {affiliateLink && (
            <div class="mt-8 flex justify-center">
               <CtaButton href={affiliateLink} title={affiliateText || "Start Nu met Handelen"} subtitle="Krijg 10% Korting op Fees" variant="primary" /> 
            </div>
          )}
        </div>

        {heroImage && (
          <div class="relative mb-12 rounded-xl overflow-hidden border border-theme shadow-sm">
             <img width={1020} height={510} src={heroImage} alt="" class="w-full object-cover" />
          </div>
        )}

        <!-- Content -->
				<div class="prose prose-lg mx-auto 
          prose-headings:text-[var(--text-main)] 
          prose-p:text-[var(--text-muted)] 
          prose-strong:text-[var(--text-main)] 
          prose-a:text-[var(--primary)] hover:prose-a:opacity-80
          prose-li:text-[var(--text-muted)]
          prose-code:text-[var(--text-main)] prose-code:bg-[var(--bg-card)] prose-code:px-1 prose-code:rounded
          ">
					<slot />
				</div>
        
        <!-- CTA Footer -->
        <div class="mt-16 p-8 bg-[var(--bg-card)] rounded-xl border border-theme text-center shadow-sm">
          <h3 class="text-2xl font-bold text-main mb-3">Klaar om te beginnen?</h3>
          <p class="text-muted mb-8 text-lg">Meld je aan via onze link en ontvang exclusieve voordelen.</p>
          <CtaButton href={affiliateLink || "/go/bitmex"} title="Maak Gratis Account Aan" variant="primary" />
        </div>
			</article>
		</main>
		<Footer />
	</body>
</html>
